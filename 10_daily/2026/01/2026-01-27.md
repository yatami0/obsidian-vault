## 本日の作業
- FogScouter プロジェクトのインフラ構築を進めた。
- Next.js フロント（Vercel）から AWS Lambda 上の FastAPI を API Gateway 経由で呼び出せるようにする作業。

## 進捗・成果
- Lambda・API Gateway・Vercel の接続がほぼ完了
- `curl` でのリクエストは正常に通る状態まで持っていけた
- ブラウザからのリクエストで CORS エラーが出ることまで原因を絞り込めた

## 課題
- ブラウザからの POST リクエストが CORS エラーで失敗している
- プリフライト OPTIONS リクエストに対して `Access-Control-Allow-Origin` ヘッダが返っていない
- FastAPI の `cors_origins` に本番ドメインを追加した変更が Lambda に反映されているか要確認
- デプロイ手順（ZIP 作成 → `update-function-code`）の自動化がまだ
## 個人的所感
curl では通るのにブラウザからだと通らない、という典型的な CORS 問題にハマった。
原因の切り分けはできているので、あとは CloudWatch ログを見ながら OPTIONS リクエストがどこで止まっているかを特定するだけ。
設定の反映漏れが怪しいので、明日はまず Lambda の再デプロイから確認する。
デプロイ周りの手順が手動で煩雑になってきたので、そろそろ Makefile にまとめたい。